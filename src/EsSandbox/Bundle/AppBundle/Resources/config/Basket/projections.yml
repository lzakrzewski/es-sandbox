services:
    es_sandbox.projection.basket: "@es_sandbox.projection.basket.guzzle_eventstore"

    es_sandbox.projector.basket:
        class: EsSandbox\Basket\Infrastructure\Projection\InMemoryBasketProjector
        tags:
            - { name: event_subscriber, subscribes_to: EsSandbox\Basket\Model\ProductWasAddedToBasket, method: applyProductWasAddedToBasket }
            - { name: event_subscriber, subscribes_to: EsSandbox\Basket\Model\ProductWasRemovedFromBasket, method: applyProductWasRemovedFromBasket }

    es_sandbox.projection.basket.guzzle_eventstore:
        class: EsSandbox\Basket\Infrastructure\Projection\GuzzleEventStoreBasketProjection
        arguments:
            - "@guzzle_http.client"
            - "%es_sandbox.event_store_address%"